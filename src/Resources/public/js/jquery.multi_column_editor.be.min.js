(function(a){MultiColumnEditor={init:function(){this.initActions()},initActions:function(){var c=a(".multi-column-editor-wrapper");if(c.length<1){return}function b(g,j,i,l){var k=g.closest("form").serializeArray(),e=[],f=g.closest(".multi-column-editor-wrapper").find(".multi-column-editor").hasClass("fe"),h=g.attr("href");a.each(k,function(m,n){if(n.name!="FORM_SUBMIT"){e.push(n)}});k=e;a.merge(k,[{name:"row",value:g.closest(".mce-row").data("index"),},{name:"field",value:g.closest(".multi-column-editor").data("field"),},{name:"table",value:g.closest(".multi-column-editor").data("table"),},]);if(typeof i!=="undefined"){a.merge(k,i)}if(!f){a.merge(k,[{name:"action",value:j,},])}a.post(h,k,function(m){if(f){g.closest(".multi-column-editor-wrapper").html(m.result.html)}else{g.closest(".multi-column-editor-wrapper").html(m);MultiColumnEditor.initChosen();HASTE_PLUS.call(l);if(a('body[class*="version_4"]').length<1){if(Stylect!=="undefined"){Stylect.convertSelects()}}}})}a("body").on("click",".multi-column-editor .add",function(g){var f=a(this);g.preventDefault();b(f,"addRow")}).on("click",".multi-column-editor .delete",function(g){var f=a(this);g.preventDefault();b(f,"deleteRow")});function d(e){new Sortables(e,{constrain:true,opacity:0.6,handle:".drag-handle",onComplete:function(h){var f=[],g=false;a(h).closest(".rows").find(".mce-row").each(function(){f.push(a(this).data("index"));if(a(this).data("index")!=a(this).index()+1){g=true}});additionalData=[{name:"newIndices",value:f.join(","),},];if(g){b(a(h),"sortRows",additionalData,function(){d(e)})}},})}d(".multi-column-editor-wrapper .sortable")},};a(document).ready(function(){MultiColumnEditor.init()})})(jQuery);(function(){if(typeof window.addEvent==="function"){window.addEvent("domready",function(){MultiColumnEditor.initChosen=function(){$$(".multi-column-editor select.tl_chosen").each(function(a){if(typeof a.initialized==="undefined"){a.initialized=$$("#"+a.getAttribute("id")).chosen()}})}})}})();